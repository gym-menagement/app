# 헬스장 앱 기능 개선 계획

## 현재 구현된 기능

### 인증 및 사용자 관리
- ✅ 로그인 / 회원가입
- ✅ 소셜 로그인 (카카오, 네이버, 애플, 구글)
- ✅ 아이디/비밀번호 찾기
- ✅ 프로필 조회 및 로그아웃

### 헬스장 관리
- ✅ 헬스장 검색
- ✅ 헬스장 상세 정보 조회
- ✅ 이용권 목록 조회

### 이용권 관리
- ✅ 이용권 상세 정보 조회
- ✅ 이용권 구매 (결제)
- ✅ 내 이용권 목록 조회
- ✅ QR 코드 표시 (입장용)
- ✅ 이용권 일시정지/재개 기능
- ✅ 이용권 상태 관리 (사용중, 일시정지, 만료, 종료)

### 운동 일지
- ✅ 캘린더 기반 운동 기록 조회
- ✅ 월별 출석 통계
- ✅ 출석 기록 자동 표시
- ✅ 운동 일지 작성 (운동명, 세트, 횟수, 무게, 시간, 칼로리, 메모)
- ✅ 운동 일지 상세 조회
- ✅ 운동 일지 삭제

## 추가 개발 계획

### 1. 알림 기능 (높은 우선순위)
**목표**: 사용자 리텐션 향상 및 이용권 관리 편의성 제공

#### 1.1 이용권 관련 알림
- [ ] 이용권 만료 D-7 알림
- [ ] 이용권 만료 D-3 알림
- [ ] 이용권 만료 D-1 알림
- [ ] 이용권 만료 당일 알림
- [ ] 일시정지 만료 알림

#### 1.2 운동 독려 알림
- [ ] 3일 이상 미출석 시 알림
- [ ] 주간 운동 목표 달성 알림
- [ ] 개인 기록 갱신 알림

#### 1.3 구현 요소
- [O] FCM(Firebase Cloud Messaging) 설정
- [O] 푸시 알림 권한 요청 UI
- [O] 알림 설정 화면 (on/off 토글)
- [ ] 백엔드 스케줄러 연동

---

### 2. 결제 내역 화면 (높은 우선순위)
**목표**: 사용자 결제 이력 투명성 확보

#### 2.1 기능 요구사항
- [O] 결제 내역 목록 조회 (페이지네이션)
- [O] 결제 상세 정보 조회
  - [O] 결제 일시
  - [O] 결제 금액 (정상가, 할인, 최종 금액)
  - [O] 결제 수단
  - [O] 헬스장 정보
  - [O] 이용권 정보
- [ ] 영수증 조회/다운로드
- [O] 환불 요청 기능 (조건부)
- [O] 결제 상태 표시 (완료, 취소, 환불)

#### 2.2 구현 파일
- [O] `lib/screens/payment_history_screen.dart`
- [O] `lib/screens/payment_detail_screen.dart`
- [O] `lib/model/order.dart` (결제 정보 확장)
- [O] `lib/providers/order_provider.dart`
- [O] 프로필 화면에 결제 내역 메뉴 추가
- [O] `lib/components/infinite_scroll_list.dart` (무한 스크롤 컴포넌트)

---

### 3. 통계 및 리포트 기능 (중간 우선순위)
**목표**: 사용자의 운동 성과 시각화 및 동기 부여

#### 3.1 운동 통계
- [ ] 주간 출석 통계 그래프
- [ ] 월별 출석 통계 그래프
- [ ] 운동 부위별 분석 (가슴, 등, 다리 등)
- [ ] 운동 종류별 빈도 분석
- [ ] 총 운동 시간 통계

#### 3.2 개인 기록 추적
- [ ] 운동별 최고 무게 기록
- [ ] 운동별 최고 횟수 기록
- [ ] 최장 연속 출석 기록
- [ ] 월별 소모 칼로리 총합

#### 3.3 진행률 그래프
- [ ] 체중 변화 그래프 (추가 필요)
- [ ] 근력 증가 그래프 (무게별)
- [ ] 출석률 트렌드

#### 3.4 구현 요소
- [ ] `fl_chart` 또는 `charts_flutter` 패키지 사용
- [ ] `lib/screens/statistics_screen.dart`
- [ ] 데이터 집계 로직
- [ ] 캐싱 전략

---

### 4. 설정 화면 (중간 우선순위)
**목표**: 사용자 맞춤 설정 및 개인정보 관리

#### 4.1 개인정보 관리
- [ ] 프로필 정보 수정
  - 이름
  - 전화번호
  - 주소
  - 프로필 이미지 업로드
- [ ] 비밀번호 변경
- [ ] 회원 탈퇴

#### 4.2 알림 설정
- [ ] 푸시 알림 on/off
- [ ] 알림 유형별 설정
  - 이용권 만료 알림
  - 운동 독려 알림
  - 마케팅 알림

#### 4.3 앱 설정
- [ ] 테마 설정 (라이트/다크 모드)
- [ ] 언어 설정 (한국어/영어)
- [ ] 캐시 삭제
- [ ] 앱 버전 정보

#### 4.4 구현 파일
- [ ] `lib/screens/settings_screen.dart`
- [ ] `lib/screens/edit_profile_screen.dart`
- [ ] `lib/screens/change_password_screen.dart`
- [ ] `lib/providers/settings_provider.dart`

---

### 5. 이용권 갱신 기능 (중간 우선순위)
**목표**: 이용권 재구매 편의성 향상

#### 5.1 기능 요구사항
- [ ] 만료 예정 이용권 자동 갱신 옵션
- [ ] 갱신 시 할인 혜택 표시
- [ ] 자동 결제 등록 (카드 정보 저장)
- [ ] 갱신 알림 설정

#### 5.2 UI 개선
- [ ] 이용권 상세 화면에 "갱신하기" 버튼 추가
- [ ] 갱신 혜택 배너 표시
- [ ] 갱신 할인율 강조

---

### 6. 헬스장 리뷰 시스템 (낮은 우선순위)
**목표**: 커뮤니티 활성화 및 헬스장 정보 품질 향상

#### 6.1 기능 요구사항
- [ ] 헬스장 리뷰 작성
  - 별점 평가 (1-5점)
  - 텍스트 리뷰
  - 사진 업로드 (최대 5장)
  - 태그 선택 (시설, 청결, 직원 친절도 등)
- [ ] 리뷰 목록 조회
  - 최신순 / 별점순 정렬
  - 사진이 있는 리뷰 필터
- [ ] 리뷰 좋아요/신고
- [ ] 내가 작성한 리뷰 관리

#### 6.2 구현 파일
- [ ] `lib/screens/gym_review_screen.dart`
- [ ] `lib/screens/write_review_screen.dart`
- [ ] `lib/model/review.dart`
- [ ] `lib/providers/review_provider.dart`

---

### 7. QR 스캔 체크인 기능 (중간 우선순위)
**목표**: 출석 체크 자동화

#### 7.1 기능 요구사항
- [ ] QR 코드 스캔 화면
- [ ] 출석 체크인 처리
- [ ] 체크인 성공/실패 피드백
- [ ] 체크아웃 기능
- [ ] 운동 시간 자동 계산

#### 7.2 구현 요소
- [ ] `qr_code_scanner` 또는 `mobile_scanner` 패키지
- [ ] `lib/screens/qr_scan_screen.dart`
- [ ] 카메라 권한 요청
- [ ] 백엔드 체크인 API 연동

---

### 8. 운동 루틴 관리 (낮은 우선순위)
**목표**: 반복되는 운동 기록의 편의성 향상

#### 8.1 기능 요구사항
- [ ] 운동 루틴 템플릿 생성
  - 루틴 이름
  - 운동 목록 (순서 포함)
  - 각 운동의 세트/횟수/무게
- [ ] 루틴 저장 및 관리
- [ ] 루틴 템플릿 적용하여 일지 작성
- [ ] 루틴별 진행 상황 추적
- [ ] 커뮤니티 루틴 공유 (선택)

#### 8.2 구현 파일
- [ ] `lib/screens/routine_list_screen.dart`
- [ ] `lib/screens/create_routine_screen.dart`
- [ ] `lib/model/routine.dart`
- [ ] `lib/providers/routine_provider.dart`

---

### 9. 친구 기능 (낮은 우선순위)
**목표**: 소셜 기능 추가로 사용자 참여도 향상

#### 9.1 기능 요구사항
- [ ] 친구 검색 (아이디, 이름)
- [ ] 친구 추가 요청/수락/거절
- [ ] 친구 목록 조회
- [ ] 친구 운동 기록 피드 조회
- [ ] 같은 헬스장 이용자 찾기
- [ ] 친구와 운동 목표 경쟁 (선택)

#### 9.2 구현 파일
- [ ] `lib/screens/friends_screen.dart`
- [ ] `lib/screens/friend_profile_screen.dart`
- [ ] `lib/model/friend.dart`
- [ ] `lib/providers/friend_provider.dart`

---

### 10. PT/GX 예약 시스템 (낮은 우선순위)
**목표**: 헬스장 부가 서비스 통합

#### 10.1 기능 요구사항
- [ ] PT 트레이너 목록 조회
- [ ] PT 세션 예약
  - 트레이너 선택
  - 날짜/시간 선택
  - 가격 확인
- [ ] GX 수업 시간표 조회
- [ ] GX 수업 예약
- [ ] 예약 내역 조회
- [ ] 예약 취소/변경

#### 10.2 구현 파일
- [ ] `lib/screens/pt_list_screen.dart`
- [ ] `lib/screens/pt_reservation_screen.dart`
- [ ] `lib/screens/gx_schedule_screen.dart`
- [ ] `lib/model/trainer.dart`
- [ ] `lib/model/reservation.dart`
- [ ] `lib/providers/reservation_provider.dart`

---

## 우선순위 요약

### 높은 우선순위
1. **알림 기능** - 사용자 리텐션에 직접적인 영향
2. **결제 내역 화면** - 필수 기능, 현재 누락되어 있음

### 중간 우선순위
3. **통계 및 리포트 기능** - 사용자 경험 향상
4. **설정 화면** - 기본적인 앱 기능
5. **이용권 갱신 기능** - 매출 증대 기회
6. **QR 스캔 체크인** - 자동화로 편의성 향상

### 낮은 우선순위
7. **헬스장 리뷰 시스템** - 커뮤니티 기능
8. **운동 루틴 관리** - 파워 유저용 기능
9. **친구 기능** - 소셜 기능
10. **PT/GX 예약 시스템** - 추가 비즈니스 모델

---

## 기술 스택 추가 고려사항

### 패키지
- `firebase_messaging` - 푸시 알림
- `fl_chart` - 통계 그래프
- `image_picker` - 이미지 업로드
- `qr_code_scanner` 또는 `mobile_scanner` - QR 스캔
- `shared_preferences` - 로컬 설정 저장
- `sqflite` - 로컬 데이터베이스 (오프라인 지원)

### 백엔드 API 추가 필요
- 결제 내역 조회 API
- 알림 설정 API
- 리뷰 CRUD API
- 친구 관리 API
- 예약 관리 API

---

## 다음 단계

1. **높은 우선순위 기능부터 순차적으로 구현**
2. **각 기능별로 상세 설계 문서 작성**
3. **백엔드 팀과 API 스펙 협의**
4. **사용자 피드백을 반영한 우선순위 조정**
